<html>

<head>
    <title>Harvest Super</title>

    <script>

        function Employee(name,gender,nic){ this.name=name; this.gender=gender; this.nic=nic; }

        
        window.addEventListener("load", initialize);

        function initialize(){

        genders = [ "Male", "Female", "Other" ];

        e1 = new Employee("Sunil", "Male", "676767654V");
        e2 = new Employee("Nimal", "Male", "687657654V");
        e3 = new Employee("Mala", "Female", "543767654V");
        e4 = new Employee("Nimal", "Female", "879867654V");

    

        employees = new Array();  // Array 
        employees.push(e1);
        employees.push(e2);
        employees.push(e3);
        employees.push(e4);

        
        genders.forEach( g => { 
            
            txt = document.createTextNode( g);
            opt = document.createElement("option");
            opt.appendChild(txt);
            cmbGender.appendChild(opt);
         } );

        genders.forEach( g => { 
            txt = document.createTextNode( g);
            opt = document.createElement("option");
            opt.appendChild(txt);
            cmbSearchGender.appendChild(opt);
         } );

         
        employees.forEach( e => { 
            
            txtName = document.createTextNode( e.name);
            txtGender = document.createTextNode( e.gender);
            txtNic = document.createTextNode( e.nic);

            tdName = document.createElement("td");
            tdGender = document.createElement("td");
            tdNic = document.createElement("td");

            tdName.appendChild(txtName);
            tdGender.appendChild(txtGender);
            tdNic.appendChild(txtNic);

            row = document.createElement("tr");

            row.appendChild(tdName);
            row.appendChild(tdGender);
            row.appendChild(tdNic);

            tblEmployee.children[1].appendChild(row);

         } );

        }

        function search(){

            name = txtSearchName.value;
            gender=cmbSearchGender.value;


            // Validations - Employees array with filter function

            // Test 1 - Name blank and Gender not selected 
        if(name=="" && gender=="unselected"){window.alert("Enter or select the seraching criteria");}
            

          else{

            // Test 2 - Name not blank Gender blank 
            if(name!="" && gender=="unselected") selectedemployees = employees.filter( (e) => e.name == name );
           
            // Test 3 - Name Blank and gender selected 
            if(name=="" && gender!="unselected") selectedemployees = employees.filter( (e) => e.gender == gender );
           
            // Test 4 - Name and Gender both available
            if(name!="" && gender!="unselected") selectedemployees = employees.filter( (e) => e.name==name && e.gender == gender );
            
            
            tblEmployee.children[1].innerHTML="";
            
            selectedemployees.forEach( e => { 

            txtName = document.createTextNode( e.name);
            txtGender = document.createTextNode( e.gender);
            txtNic = document.createTextNode( e.nic);

            tdName = document.createElement("td");
            tdGender = document.createElement("td");
            tdNic = document.createElement("td");

            tdName.appendChild(txtName);
            tdGender.appendChild(txtGender);
            tdNic.appendChild(txtNic);

            row = document.createElement("tr");

            row.appendChild(tdName);
            row.appendChild(tdGender);
            row.appendChild(tdNic);

            tblEmployee.children[1].appendChild(row);

         } );
        
        }
     
    }

        function searchclear(){
           

            tblEmployee.children[1].innerHTML="";

            employees.forEach( e => { 
            
            txtName = document.createTextNode( e.name);
            txtGender = document.createTextNode( e.gender);
            txtNic = document.createTextNode( e.nic);

            tdName = document.createElement("td");
            tdGender = document.createElement("td");
            tdNic = document.createElement("td");

            tdName.appendChild(txtName);
            tdGender.appendChild(txtGender);
            tdNic.appendChild(txtNic);

            row = document.createElement("tr");

            row.appendChild(tdName);
            row.appendChild(tdGender);
            row.appendChild(tdNic);

            tblEmployee.children[1].appendChild(row);

         } );

            txtSearchName.value="";
            cmbSearchGender.value="unselected";
        }

    </script>
</head>

<body >
    <h1>Employee Details Management</Details></h1>
    <h3>=============== Form ===============</h3>
        <form>
            <label>Name     :</label> <input type="text" id="txtName" size="20" placeholder="Enter Name" /><br/><br/>
            <label>NIC      :</label> <input type="text" id="txtNic" size="20" placeholder="Enter NIC" /><br/><br/>
            <label>Gender :</label>
                <select id="cmbGender">
                    <option selected disabled>Select Gender</option>
                    
                </select> <br/><br/>

            <button id="btnDelete">Delete</button> <button id="btnUpdate">Update</button>
            <button id="btnClear">Clear</button> <button id="btnAdd">Add</button>

        </form>

    <h3>=============== Search ==============</h3>

    <form onsubmit="return false">
        
      <input type="text" id="txtSearchName" size="20" placeholder="Search By Name" />
      <select id="cmbSearchGender">
        <option selected disabled value="unselected">Search By Gender</option>
        
    </select>  <br/><br/>

       <button id="btnSearchClear" onclick="searchclear()">Clear Search</button> <button id="btnSearch" onclick="search()">Search</button>
    </form>

    <h3>=============== View ===============</h3>

    <table border="1" id="tblEmployee">
        <thead><tr><th>Name</th><th>Gender</th><th>NIC</th></tr></thead>
        <tbody>
        </tbody>
    </table>


</body>

</html>